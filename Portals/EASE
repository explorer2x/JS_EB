if (document.domain.includes('ease.com')) { if (document.getElementById("detailsModal") != null) { if (document.getElementById("detailsModal").getAttribute("class") == "c-modal c-modal--responsive c-modal__background fadeInTop") { dic = { "DATE_OF_HIRE": "Hire Date", "FULL_PART_TIME": "Type", "TERM_REASON": "Termination Reason", "ANNUAL_SALARY": "Compensation", "HOUR_PER_WEEK": "Hours", "JOB_TITLE": "Job Title", "WORK_EMAIL": "Email", "PERSONAL_EMAIL": "Personal Email", "HOMEPHONE": "Personal Phone", "WORKPHONE": "Work Phone", "MARITAL_STATUS": "Marital Status", }; var cmb = document.getElementsByClassName('c-modal__body'); for (i = 0; i < cmb.length; i++) { if (cmb[i].children[0].getAttribute('class') == 'o-input-groups') { var cmb_el = cmb[i]; break; } } if (cmb_el) { var el_up = cmb_el.getElementsByClassName('o-input-groups')[0]; var allPageTags = el_up.getElementsByTagName("strong"); for (key in dic) { for (i = 0; i < allPageTags.length; i++) { var info = allPageTags[i].parentElement.textContent; t_title = info.split(":")[0]; t_value = info.split(":")[1]; if (dic[key] == t_title) { if (t_title == 'Compensation') { if (t_value.includes('Hourly')) { obj.ee_BASIC_info['PAY_PERIOD'] = 'H'; obj.ee_BASIC_info['HOURLY_SALARY'] = t_value.trim().split('/')[0].trim(); } else { obj.ee_BASIC_info['PAY_PERIOD'] = 'A'; obj.ee_BASIC_info['ANNUAL_SALARY'] = t_value.trim().split('/')[0].trim(); }; } else { obj.ee_BASIC_info[key] = t_value.trim() } } } }; var el_down = cmb_el.getElementsByClassName('c-list-view')[0].getElementsByClassName('c-list-view__body')[0]; var erow = el_down.getElementsByClassName("e-row"); for (i = 0; i < erow.length; i++) { var ediv = erow[i].getElementsByTagName("div"); relation = ediv[1].textContent.trim(); if (relation == 'Employee') { obj.ee_BASIC_info["FIRST_NAME"] = ediv[0].children[0].textContent.trim(); if (ediv[0].children.length > 2) { obj.ee_BASIC_info["MIDDLE_NAME"] = ediv[0].children[1].textContent.trim(); obj.ee_BASIC_info["LAST_NAME"] = ediv[0].children[2].textContent.trim(); } else { obj.ee_BASIC_info["LAST_NAME"] = ediv[0].children[1].textContent.trim(); }; obj.ee_BASIC_info["SSN"] = ediv[2].textContent.trim(); obj.ee_BASIC_info["GENDER"] = ediv[3].textContent.trim()[0]; obj.ee_BASIC_info["DOB"] = ediv[4].textContent.split(" ")[0].trim(); if (ediv[5].innerHTML.split('<br>').length > 3) { var len_add = ediv[5].innerHTML.split('<br>').length; obj.ee_BASIC_info.ADDZIP = ediv[5].innerHTML.split('<br>')[len_add - 1].trim(); obj.ee_BASIC_info.ADDSTATE = ediv[5].innerHTML.split('<br>')[len_add - 2].trim(); obj.ee_BASIC_info.ADDCITY = ediv[5].innerHTML.split('<br>')[len_add - 3].trim(); obj.ee_BASIC_info.ADD1 = ediv[5].innerHTML.split('<br>')[0].trim(); if (ediv[5].innerHTML.split('<br>').length > 4) { obj.ee_BASIC_info.ADD2 = ediv[5].innerHTML.split('<br>')[1].trim(); }; } }; const typeDict = { "Spouse": ["Spouse", "Spouse-Ex", "Domestic Partner"], "Child": ["Child", "Child-Domestic Partner", "Child-Adopted", "Child-Legal Guardian", "Child-Foster", "Child-Step", "Child-Grandchild"] }; function getType(name) { for (const [type, keywords] of Object.entries(typeDict)) { if (keywords.some(keyword => name.includes(keyword))) { type_dic = [type, name]; return type_dic; } } return ""; }; var relation_dic = getType(relation); if (relation_dic != '' && relation_dic[0] in obj.ee_DEPT_info) { if (obj.ee_DEPT_info[relation_dic[0]]["FIRST_NAME"] == "") { if (ediv[0].children.length > 2) { obj.ee_DEPT_info[relation_dic[0]]["MIDDLE_NAME"] = ediv[0].children[1].textContent.trim(); obj.ee_DEPT_info[relation_dic[0]]["LAST_NAME"] = ediv[0].children[2].textContent.trim(); } else { obj.ee_DEPT_info[relation_dic[0]]["LAST_NAME"] = ediv[0].children[1].textContent.trim(); }; obj.ee_DEPT_info[relation_dic[0]]["FIRST_NAME"] = ediv[0].children[0].textContent.trim(); obj.ee_DEPT_info[relation_dic[0]]["SSN"] = ediv[2].textContent.trim(); obj.ee_DEPT_info[relation_dic[0]]["GENDER"] = ediv[3].textContent.trim()[0]; obj.ee_DEPT_info[relation_dic[0]]["DOB"] = ediv[4].textContent.split(" ")[0].trim(); obj.ee_DEPT_info[relation_dic[0]]["RELATION"] = relation_dic[1]; } else { if (ediv[0].children.length > 2) { obj.ee_DEPT_info[relation_dic[0]]["MIDDLE_NAME"] = obj.ee_DEPT_info[relation_dic[0]]["MIDDLE_NAME"] + "|" + ediv[0].children[1].textContent.trim(); obj.ee_DEPT_info[relation_dic[0]]["LAST_NAME"] = obj.ee_DEPT_info[relation_dic[0]]["LAST_NAME"] + "|" + ediv[0].children[2].textContent.trim(); } else { obj.ee_DEPT_info[relation_dic[0]]["LAST_NAME"] = obj.ee_DEPT_info[relation_dic[0]]["LAST_NAME"] + "|" + ediv[0].children[1].textContent.trim(); }; obj.ee_DEPT_info[relation_dic[0]]["FIRST_NAME"] = obj.ee_DEPT_info[relation_dic[0]]["FIRST_NAME"] + "|" + ediv[0].children[0].textContent.trim(); obj.ee_DEPT_info[relation_dic[0]]["SSN"] = obj.ee_DEPT_info[relation_dic[0]]["SSN"] + "|" + ediv[2].textContent.trim(); obj.ee_DEPT_info[relation_dic[0]]["GENDER"] = obj.ee_DEPT_info[relation_dic[0]]["GENDER"] + "|" + ediv[3].textContent.trim()[0]; obj.ee_DEPT_info[relation_dic[0]]["DOB"] = obj.ee_DEPT_info[relation_dic[0]]["DOB"] + "|" + ediv[4].textContent.split(" ")[0].trim(); obj.ee_DEPT_info[relation_dic[0]]["RELATION"] = obj.ee_DEPT_info[relation_dic[0]]["RELATION"] + "|" + relation_dic[1]; }; } } } }; } else { if (document.getElementById("dependentModalTrigger") == null) { dic = { "FIRST_NAME": "firstname", "MIDDLE_NAME": "middlename", "LAST_NAME": "lastname", "DOB": "birthdate", "SSN": "ssn", "ADD1": "addr1", "ADD2": "addr2", "ADDZIP": "zip", "HOMEPHONE": "homephone", "WORKPHONE": "workphone", "ADDCITY": "city", "ADDCOUNTY": "county", "ANNUAL_SALARY": "compensationAmount", "HOUR_PER_WEEK": "hours", "DATE_OF_HIRE": "hiredate", "PERSONAL_EMAIL": "personalemail", }; for (key in dic) { if (document.getElementById(dic[key]) != null) { if (document.getElementById(dic[key]).value != "") { if (key in obj.ee_BASIC_info) { obj.ee_BASIC_info[key] = document.getElementById(dic[key]).value } } } }; if (document.getElementById('c-input__label-sex') != null) { if (document.getElementById('c-input__label-sex').parentElement.nextElementSibling != null) { obj.ee_BASIC_info.GENDER = document.getElementById('c-input__label-sex').parentElement.nextElementSibling.textContent } }; var state_el = document.querySelector("#stateRow > div > div.c-input > div.c-select__handle > div.c-input__value"); if (state_el) { obj.ee_BASIC_info.ADDSTATE = state_el.textContent }; var married_el = document.querySelector("#maritalRow > div > div.c-input > div.c-select__handle > div.c-input__value"); if (married_el) { obj.ee_BASIC_info.MARITAL_STATUS = married_el.textContent }; } else if (document.getElementById('dependentModalTrigger') != null) { var dept_obj = JSON.parse(document.getElementById('dependentModalTrigger').value); for (i = 0; i < dept_obj.data.length; i++) { if (dept_obj.data[i].key == "relationship") { relation_v = (dept_obj.data[i].value); break; } }; const typeDict = { "Spouse": ["Spouse", "Spouse-Ex", "Domestic Partner"], "Child": ["Child", "Child-Domestic Partner", "Child-Adopted", "Child-Legal Guardian", "Child-Foster", "Child-Step", "Child-Grandchild"] }; function getType(name) { for (const [type, keywords] of Object.entries(typeDict)) { if (keywords.some(keyword => name.includes(keyword))) { type_dic = [type, name]; return type_dic; } } return ""; }; var relation_dic = getType(relation_v); if (relation_dic != '' && relation_dic[0] in obj.ee_DEPT_info) { dic = { "FIRST_NAME": "firstname", "MIDDLE_NAME": "middlename", "LAST_NAME": "lastname", "GENDER": "sex", "DOB": "birthdate", "SSN": "ssn", "ADD1": "addr1", "ADD2": "addr2", "ADDZIP": "zip", "HOMEPHONE": "homephone", "WORKPHONE": "workphone", "ADDCITY": "city", "ADDCOUNTY": "county", }; if (obj.ee_DEPT_info[relation_dic[0]]["FIRST_NAME"] == "") { for (i = 0; i < dept_obj.data.length; i++) { for (key in dic) { if (dept_obj.data[i].key == dic[key]) { obj.ee_DEPT_info[relation_dic[0]][key] = dept_obj.data[i].value } } }; obj.ee_DEPT_info[relation_dic[0]]['RELATION'] = relation_dic[1]; } else { for (i = 0; i < dept_obj.data.length; i++) { for (key in dic) { if (dept_obj.data[i].key == dic[key]) { obj.ee_DEPT_info[relation_dic[0]][key] = obj.ee_DEPT_info[relation_dic[0]][key] + "|" + dept_obj.data[i].value } } }; } } else { alert('this relationship is not valid in JS, need manual entry') }; }; } };